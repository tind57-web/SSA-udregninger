<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSA Beregner</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png">
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f8fafc; color:#111; }
    h1 { text-align:center; padding:1rem; margin:0; }
    .tabs { display:flex; flex-wrap:wrap; justify-content:center; background:#e2e8f0; }
    .tab-btn { flex:1; padding:0.7rem; cursor:pointer; border:none; background:#e2e8f0; font-size:0.9rem; }
    .tab-btn.active { background:#0d9488; color:#fff; }
    .tab-content { display:none; padding:1rem; }
    .input { width:100%; padding:0.6rem; margin-bottom:0.7rem; font-size:1rem; border:1px solid #ccc; border-radius:6px; }
    .btn { background:#0d9488; color:white; border:none; padding:0.7rem 1rem; border-radius:8px; cursor:pointer; margin-top:0.5rem; }
    .btn:hover { background:#0f766e; }
    .result { margin-top:0.8rem; font-weight:bold; white-space:pre-line; }
    #log-entries { max-height:200px; overflow:auto; background:#f1f5f9; padding:0.5rem; border-radius:6px; }
    .log-item { border-bottom:1px solid #cbd5e1; padding:0.3rem 0; font-size:0.9rem; }
  </style>
</head>
<body>
  <h1>ü©∫ SSA Beregner</h1>
  <div class="tabs">
    <button class="tab-btn active" onclick="openTab('tablet')">üíä Tablet/Dosis</button>
    <button class="tab-btn" onclick="openTab('vaeske')">üíß V√¶ske</button>
    <button class="tab-btn" onclick="openTab('drop')">üíâ Dr√•ber</button>
    <button class="tab-btn" onclick="openTab('bmi')">‚öñÔ∏è BMI</button>
    <button class="tab-btn" onclick="openTab('procent')">üßÆ Procent</button>
    <button class="tab-btn" onclick="openTab('energi')">‚ö° Energi</button>
    <button class="tab-btn" onclick="openTab('log')">üìú Log</button>
  </div>
  <div id="tablet" class="tab-content" style="display:block">
    <h2>üíä Tablet/Dosis</h2>
    <label>√ònsket dosis (mg):</label><input id="dose" class="input" type="number">
    <label>Mg pr. tablet:</label><input id="mg" class="input" type="number">
    <label>Antal tabletter:</label><input id="antal" class="input" type="number">
    <label>Styrke (mg/ml):</label><input id="styrke" class="input" type="number">
    <label>Volumen (ml):</label><input id="volumen" class="input" type="number">
    <button class="btn" onclick="calcTablet()">Beregn</button>
    <p id="tablet-resultat" class="result"></p>
  </div>
  <div id="vaeske" class="tab-content"><h2>üíß V√¶skebalance</h2>
    <label>V√¶ske ind (ml):</label><input id="ind" class="input" type="number">
    <label>V√¶ske ud (ml):</label><input id="ud" class="input" type="number">
    <button class="btn" onclick="calcVaeske()">Beregn</button>
    <p id="vaeske-resultat" class="result"></p>
  </div>
  <div id="drop" class="tab-content"><h2>üíâ Dr√•ber/minut</h2>
    <label>V√¶skem√¶ngde (ml):</label><input id="ml" class="input" type="number">
    <label>Tid (timer):</label><input id="tid" class="input" type="number">
    <button class="btn" onclick="calcDrop()">Beregn</button>
    <p id="drop-resultat" class="result"></p>
  </div>
  <div id="bmi" class="tab-content"><h2>‚öñÔ∏è BMI</h2>
    <label>V√¶gt (kg):</label><input id="vaegt" class="input" type="number">
    <label>H√∏jde (cm):</label><input id="hojde" class="input" type="number">
    <button class="btn" onclick="calcBMI()">Beregn</button>
    <p id="bmi-resultat" class="result"></p>
  </div>
  <div id="procent" class="tab-content"><h2>üßÆ Procentregning</h2>
    <label>Udgangsprocent (%):</label><input id="start" class="input" type="number">
    <label>√ònsket procent (%):</label><input id="slut" class="input" type="number">
    <label>Slutvolumen (ml):</label><input id="vol" class="input" type="number">
    <button class="btn" onclick="calcProcent()">Beregn</button>
    <p id="procent-resultat" class="result"></p>
  </div>
  <div id="energi" class="tab-content"><h2>‚ö° Energiforbrug</h2>
    <label>K√∏n:</label><select id="energi-kon" class="input"><option value="mand">Mand</option><option value="kvinde">Kvinde</option></select>
    <label>Alder (√•r):</label><input id="energi-alder" class="input" type="number">
    <label>V√¶gt (kg):</label><input id="energi-vaegt" class="input" type="number">
    <label>H√∏jde (cm):</label><input id="energi-hojde" class="input" type="number">
    <label>Aktivitetsniveau:</label>
    <select id="energi-aktivitet" class="input">
      <option value="1.2">Stillende (1.2)</option>
      <option value="1.375">Let aktiv (1.375)</option>
      <option value="1.55">Moderat aktiv (1.55)</option>
      <option value="1.725">Meget aktiv (1.725)</option>
      <option value="1.9">Ekstrem aktiv (1.9)</option>
    </select>
    <button class="btn" onclick="calcEnergi()">Beregn</button>
    <p id="energi-resultat" class="result"></p>
  </div>
  <div id="log" class="tab-content"><h2>üìú Log</h2>
    <div id="log-entries"></div>
    <button class="btn" onclick="exportLog()">Eksport√©r log (.txt)</button>
    <button class="btn" onclick="clearLog()">Ryd log</button>
  </div>
<script>
function openTab(id){document.querySelectorAll('.tab-content').forEach(c=>c.style.display='none');document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.getElementById(id).style.display='block';document.querySelector(`.tab-btn[onclick="openTab('${id}')"]`).classList.add('active');}
function addToLog(type,text){const logs=JSON.parse(localStorage.getItem("ssa-log")||"[]");const entry={time:new Date().toLocaleString(),type,text};logs.unshift(entry);localStorage.setItem("ssa-log",JSON.stringify(logs));renderLog();}
function renderLog(){const logs=JSON.parse(localStorage.getItem("ssa-log")||"[]");const container=document.getElementById("log-entries");container.innerHTML="";logs.forEach(l=>{const div=document.createElement("div");div.className="log-item";div.textContent=`[${l.time}] ${l.type}: ${l.text}`;container.appendChild(div);});}
function clearLog(){localStorage.removeItem("ssa-log");renderLog();}
function exportLog(){const logs=localStorage.getItem("ssa-log")||"";const blob=new Blob([logs],{type:"text/plain"});const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="ssa-log.txt";a.click();}
function calcTablet(){const dose=parseFloat(document.getElementById("dose").value);const mg=parseFloat(document.getElementById("mg").value);const antal=parseFloat(document.getElementById("antal").value);const styrke=parseFloat(document.getElementById("styrke").value);const vol=parseFloat(document.getElementById("volumen").value);let result="";if(dose&&mg){result=`${(dose/mg).toFixed(1)} tabletter`;}else if(antal&&mg){result=`${(antal*mg).toFixed(1)} mg`;}else if(dose&&styrke){result=`${(dose/styrke).toFixed(1)} ml`;}else if(vol&&styrke){result=`${(vol*styrke).toFixed(1)} mg`;}else{result="Indtast v√¶rdier";}document.getElementById("tablet-resultat").innerText=result;addToLog("Tablet/Dosis",result);}
function calcVaeske(){const ind=parseFloat(document.getElementById("ind").value)||0;const ud=parseFloat(document.getElementById("ud").value)||0;const res=ind-ud;document.getElementById("vaeske-resultat").innerText=`Balance: ${res} ml`;addToLog("V√¶ske",res+" ml");}
function calcDrop(){const ml=parseFloat(document.getElementById("ml").value);const tid=parseFloat(document.getElementById("tid").value);if(!ml||!tid){document.getElementById("drop-resultat").innerText="Indtast v√¶rdier";return;}const res=((ml*20)/(tid*60)).toFixed(1);document.getElementById("drop-resultat").innerText=`${res} dr√•ber/min`;addToLog("Dr√•ber",res+" dr√•ber/min");}
function calcBMI(){const v=parseFloat(document.getElementById("vaegt").value);const h=parseFloat(document.getElementById("hojde").value)/100;if(!v||!h){document.getElementById("bmi-resultat").innerText="Indtast v√¶rdier";return;}const bmi=v/(h*h);let kat="";if(bmi<18.5)kat="Underv√¶gt";else if(bmi<25)kat="Normalv√¶gt";else if(bmi<30)kat="Overv√¶gt";else kat="Sv√¶r overv√¶gt";const text=`BMI: ${bmi.toFixed(1)} (${kat})`;document.getElementById("bmi-resultat").innerText=text;addToLog("BMI",text);}
function calcProcent(){const s=parseFloat(document.getElementById("start").value);const e=parseFloat(document.getElementById("slut").value);const v=parseFloat(document.getElementById("vol").value);if(!s||!e||!v){document.getElementById("procent-resultat").innerText="Indtast v√¶rdier";return;}const m1=(e*v)/s;const vand=(v-m1).toFixed(1);const text=`Tils√¶t ${vand} ml vand`;document.getElementById("procent-resultat").innerText=text;addToLog("Procent",text);}
function calcEnergi(){const kon=document.getElementById("energi-kon").value;const alder=parseFloat(document.getElementById("energi-alder").value);const vaegt=parseFloat(document.getElementById("energi-vaegt").value);const hojde=parseFloat(document.getElementById("energi-hojde").value);const aktivitet=parseFloat(document.getElementById("energi-aktivitet").value);if(!alder||!vaegt||!hojde){document.getElementById("energi-resultat").innerText="Udfyld alle felter";return;}let bmr;if(kon=="mand"){bmr=66.5+(13.75*vaegt)+(5.003*hojde)-(6.75*alder);}else{bmr=655.1+(9.563*vaegt)+(1.850*hojde)-(4.676*alder);}const kcal=bmr*aktivitet;const kj=kcal*4.184;const text=`BMR: ${bmr.toFixed(0)} kcal (${(bmr*4.184).toFixed(0)} kJ)\nDagligt behov: ${kcal.toFixed(0)} kcal (${kj.toFixed(0)} kJ)`;document.getElementById("energi-resultat").innerText=text;addToLog("Energi",text);}
renderLog();
</script>
<script>if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('./service-worker.js');});}</script>
</body>
</html>